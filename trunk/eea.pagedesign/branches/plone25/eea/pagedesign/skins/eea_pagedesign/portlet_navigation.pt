<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">
<body>

<metal:header define-macro="header"
     i18n:domain="plone"
     tal:define="view context/@@navigationHeader;
                 displayLogo view/shouldDisplayLogo">

    <a href="#" class="tile"
       tal:condition="python: not displayLogo and not title"
       tal:attributes="href string:${root/absolute_url}/sitemap"
       i18n:translate="box_navigation">Navigation</a>
    <a href="#" class="tile"
       tal:condition="python: title and not displayLogo"
       tal:attributes="href root/getUrl|root/absolute_url"
       tal:content="title">Themes</a>
    <a href="#" class="tile"
       tal:condition="displayLogo"
       tal:attributes="href view/logoLinkUrl">
        <img src="" id="subsite-logo"
           tal:attributes="src view/logoUrl;
                           title view/title|nothing;
                           alt view/title|string:subsite logo" />
    </a>
</metal:header>

<div metal:define-macro="portlet"
       i18n:domain="plone"
       tal:omit-tag=""
       tal:define="view context/@@navigation_view;
                   root view/navigationRoot;
                   title view/title">

<metal:globalPromotion use-macro="here/portlet_globalpromotion/macros/portlet" />

<dl class="portlet" id="portlet-navigation-tree" 
    tal:condition="view/display">
    <dt class="portletHeader"  id="firstHeader">
        <span class="portletTopLeft"></span>
        <tal:block tal:define="logoURL context/@@page_design/getLogoURL|nothing">
            <img tal:condition="logoURL" tal:attributes="src logoURL"/>
        </tal:block>
        <metal:header use-macro="here/portlet_navigation/macros/header" />
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem lastItem">
        <ul class="portletNavigationTree navTreeLevel0">

            <li class="navTreeItem"
                tal:condition="view/includeTop">
                <tal:block define="typeClass string:contenttype-${view/rootTypeName};
                                   selectedClass python:test(path('view/isPortalOrDefaultChild'), 'navTreeCurrentItem', '');
                                  ">
                   <div class="contenttype-plone-site" tal:attributes="class typeClass">
                       <a class="visualIconPadding"
                          tal:attributes="href root/absolute_url;
                                          title portal/Description;
                                          class string:$selectedClass visualIconPadding;">
                       <span tal:omit-tag=""
                             tal:condition="python:root == portal"
                             i18n:translate="tabs_home">Home</span>
                       <span tal:condition="python:root != portal"
                             tal:replace="root/Title">Home</span>
                       </a>
                   </div>
                </tal:block>
            </li>
            <li tal:replace="structure view/createNavTree">
                SUBTREE
            </li>
        </ul>
        <span class="portletBottomLeft"></span>
        <span class="portletBottomRight"></span>
    </dd>
</dl>

</div>
</body>
</html>
